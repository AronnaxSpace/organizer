(()=>{var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var a=n.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),window.addEventListener("load",(function(){const e=document.getElementById("tasks"),t=document.getElementById("new-task-form");showLoader=()=>{let e=document.createElement("div");e.classList.add("loader");let t=document.createElement("span");t.classList.add("lds-dual-ring"),e.appendChild(t),document.body.appendChild(e)},hideLoader=()=>{let e=document.getElementsByClassName("loader");for(let t=0;t<e.length;t++)e[t].remove()},destroyTask=e=>{e.preventDefault(),showLoader();let t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById(`task-${this.response}`).remove(),hideLoader())},t.open("POST",e.target.action,!0),t.send()},t.addEventListener("submit",(function(e){e.preventDefault(),showLoader();let n=new XMLHttpRequest,a=new FormData(t);n.onreadystatechange=function(){4==this.readyState&&201==this.status&&(addNewTask(JSON.parse(this.response)),t.reset(),hideLoader()),4==this.readyState&&422==this.status&&(console.log(JSON.parse(this.response)),hideLoader())},n.open("POST","/tasks/create",!0),n.send(a)})),addNewTask=t=>{let n=document.createElement("tr"),a=document.createElement("td"),d=document.createElement("td"),s=document.createElement("td"),r=document.createElement("form"),o=document.createElement("button");n.id=t.id,a.innerText=t.title,n.appendChild(a),d.innerText=null===t.deadline?"-":new Date(t.deadline).toLocaleDateString("uk"),d.classList.add("ta-center"),n.appendChild(d),r.setAttribute("action",`/tasks/${t.id}/destroy`),r.setAttribute("method","post"),r.setAttribute("onsubmit","destroyTask(event)"),o.innerHTML="x",o.classList.add("btn-red"),o.setAttribute("type","submit"),r.appendChild(o),s.appendChild(r),n.appendChild(s),e.appendChild(n)}})),(()=>{"use strict";e.p})()})();